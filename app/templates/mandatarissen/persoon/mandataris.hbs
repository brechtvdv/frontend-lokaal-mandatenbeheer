{{breadcrumb
  this.model.mandataris.bekleedt.bestuursfunctie.label
  route="mandatarissen.persoon.mandataris"
  model=this.model.mandataris.id
}}

<AuToolbar @border="bottom" @size="large" as |Group|>
  <Group>
    <AuHeading @skin="2">
      <p class="au-u-h1">
        {{this.bestuursorganenTitle}}
      </p>
      <AuLink @route="mandatarissen.persoon" @model={{this.persoon.id}}><p
          class="au-u-h3"
        >{{this.persoon.gebruikteVoornaam}}
          {{this.persoon.achternaam}}</p></AuLink>

      <AuButton
        @disabled={{not this.model.mandataris.isActive}}
        {{on "click" (fn (mut this.isChangingCurrentSituation) true)}}
      >Wijzig huidige situatie</AuButton>
    </AuHeading>
  </Group>
</AuToolbar>

<div class="au-c-body-container au-c-body-container--scroll">
  <div class="au-o-box">
    <Mandatarissen::MandatarisCard
      @mandataris={{@model.mandataris}}
      @vervangers={{@model.vervangers}}
      @bestuursperiode={{@model.selectedBestuursperiode}}
    />
  </div>

  <div class="au-o-box">
    <Mandatarissen::MandatarisExtraInfoCard
      @mandataris={{@model.mandataris}}
      @form={{@model.mandatarisExtraInfoForm}}
    />
  </div>

  <div class="au-o-box">
    <Mandatarissen::MandatarisEditPrompt
      class="au-c-collapsible au-u-margin-top-small"
      @mandataris={{@model.mandataris}}
      @bestuursorganen={{@model.bestuursorganen}}
      @mandatarisEditForm={{@model.mandatarisEditForm}}
      @onMandatarisChanged={{this.onMandatarisChanged}}
    />
  </div>

  <div class="au-o-box">
    <AuHeading @level="3" @skin="4">
      Historiek
    </AuHeading>

    <AuHr />

    <ul class="au-c-list-vertical">
      <Mandatarissen::History
        @mandataris={{@model.mandataris}}
        @mandatarissen={{@model.mandatarissen}}
        @form={{@model.mandatarisEditForm}}
      />
    </ul>
  </div>
</div>

<AuModal
  @title={{(concat
    "Verander Status " this.model.mandataris.bekleedt.bestuursfunctie.label
  )}}
  @modalOpen={{this.isChangingCurrentSituation}}
  @closable={{true}}
  @closeModal={{this.closeModals}}
>
  <Mandatarissen::UpdateState
    @noTitle={{true}}
    @onCancel={{this.closeModals}}
    @onStateChanged={{this.onUpdateState}}
    @mandataris={{this.model.mandataris}}
  />
</AuModal>